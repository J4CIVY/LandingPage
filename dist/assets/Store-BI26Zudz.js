import{r as l,R as E,j as e}from"./index-CRg7Hs4i.js";import{a as O}from"./index-NIGUFBhG.js";import{S as T}from"./SEOComponent-BjILGdkq.js";const L=()=>{const[n,S]=l.useState([]),[u,g]=l.useState([]),[C,P]=l.useState(!0),[h,I]=l.useState(null),[o,b]=l.useState(""),[c,f]=l.useState("all"),[d,y]=l.useState("all"),[r,x]=l.useState([0,2e5]),[t,p]=l.useState(null),[F,v]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const s=await O.get("https://api.bskmt.com/products");if(s.data&&s.data.status==="success"&&Array.isArray(s.data.data.products))S(s.data.data.products),g(s.data.data.products);else throw new Error("Invalid API response structure or data.")}catch(s){console.error("Failed to fetch products:",s),I("Failed to load products. Please try again later.")}finally{P(!1)}})()},[]);const j=l.useCallback(a=>a.toLowerCase().replace(/[^\w\s-]/gi,"").replace(/\s+/g,"-").replace(/--+/g,"-"),[]),m=l.useCallback(a=>typeof a!="number"?(console.warn("Invalid price type for formatting:",a),"N/A"):new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(a),[]),N=l.useCallback(()=>{let a=[...n];o&&(a=a.filter(s=>s.name.toLowerCase().includes(o.toLowerCase()))),c!=="all"&&(a=a.filter(s=>s.category&&s.category.toLowerCase()===c.toLowerCase())),d!=="all"&&(a=a.filter(s=>d==="in-stock"?s.availability==="in-stock":s.availability!=="in-stock")),a=a.filter(s=>typeof s.finalPrice=="number"&&s.finalPrice>=r[0]&&s.finalPrice<=r[1]),g(a)},[o,c,d,r,n]);l.useEffect(()=>{N()},[N]);const i=l.useCallback(a=>{p(a),v(!0),document.body.style.overflow="hidden"},[]),w=l.useCallback(()=>{v(!1),p(null),document.body.style.overflow="auto"},[]),A=E.useMemo(()=>{const a=new Set(n.map(s=>s.category).filter(Boolean));return["all",...Array.from(a)]},[n]);return C?e.jsxs("div",{className:"flex justify-center items-center min-h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-500"}),e.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading products..."})]}):h?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error loading products"}),e.jsx("p",{className:"text-gray-600",children:h}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Retry"})]}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(T,{title:"Tienda - BSK Motorcycle Team",description:"Encuentra la mercancía oficial de BSK Motorcycle Team. Ropa, accesorios y más para los verdaderos amantes de las motos."}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"BSK MT Store"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Official merchandise for motorcycle enthusiasts"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Products"}),e.jsx("input",{type:"text",id:"search",placeholder:"Search by product name...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",value:o,onChange:a=>b(a.target.value),"aria-label":"Search products by name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{id:"category",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",value:c,onChange:a=>f(a.target.value),"aria-label":"Filter products by category",children:A.map(a=>e.jsx("option",{value:a,children:a==="all"?"All Categories":a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"availability",className:"block text-sm font-medium text-gray-700 mb-1",children:"Availability"}),e.jsxs("select",{id:"availability",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",value:d,onChange:a=>y(a.target.value),"aria-label":"Filter products by availability",children:[e.jsx("option",{value:"all",children:"All Products"}),e.jsx("option",{value:"in-stock",children:"In Stock"}),e.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: ",m(r[0])," - ",m(r[1])]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"range",min:"0",max:"200000",step:"10000",value:r[0],onChange:a=>x([parseInt(a.target.value,10),r[1]]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","aria-label":"Minimum price"}),e.jsx("input",{type:"range",min:"0",max:"200000",step:"10000",value:r[1],onChange:a=>x([r[0],parseInt(a.target.value,10)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","aria-label":"Maximum price"})]})]})]}),u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"No products found matching your criteria"}),e.jsx("button",{onClick:()=>{b(""),f("all"),y("all"),x([0,2e5])},className:"mt-4 px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors","aria-label":"Reset all filters",children:"Reset Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300",role:"listitem",children:[e.jsxs("div",{className:"h-64 bg-gray-100 relative overflow-hidden cursor-pointer",onClick:()=>i(a),onKeyPress:s=>{(s.key==="Enter"||s.key===" ")&&i(a)},tabIndex:0,role:"button","aria-label":`View details for ${a.name}`,children:[e.jsx("img",{src:a.featuredImage,alt:a.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",onError:s=>{s.currentTarget.src="https://via.placeholder.com/300x300?text=Image+Not+Available",s.currentTarget.alt="Image not available"},loading:"lazy",crossOrigin:"anonymous"}),a.newProduct&&e.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 text-xs font-bold rounded",children:"NEW"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1 cursor-pointer hover:text-red-500",onClick:()=>i(a),onKeyPress:s=>{(s.key==="Enter"||s.key===" ")&&i(a)},tabIndex:0,role:"button","aria-label":`View details for ${a.name}`,children:a.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:a.shortDescription}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("span",{className:"font-bold text-red-500",children:m(a.finalPrice)}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${a.availability==="in-stock"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.availability==="in-stock"?"In Stock":"Out of Stock"})]}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsx("button",{onClick:()=>i(a),className:"flex-1 py-2 bg-gray-100 text-gray-800 rounded hover:bg-gray-200 transition-colors","aria-label":`Open details for ${a.name}`,children:"Details"}),e.jsx("a",{href:`https://tienda.bskmt.com/producto/${a.slug||j(a.name)}`,target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-2 text-center rounded transition-colors ${a.availability==="in-stock"?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-disabled":a.availability!=="in-stock",tabIndex:a.availability!=="in-stock"?-1:0,children:"Buy Now"})]})]})]},a.id))}),F&&t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-40",onClick:w}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"product-modal-title",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsxs("div",{className:"w-full sm:w-1/2 mb-4 sm:mb-0 sm:pr-4",children:[e.jsx("div",{className:"h-64 sm:h-96 bg-gray-100 rounded-lg overflow-hidden mb-2",children:e.jsx("img",{src:t.featuredImage,alt:t.name,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="https://via.placeholder.com/600x600?text=Image+Not+Available",a.currentTarget.alt="Image not available"},crossOrigin:"anonymous"})}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.gallery&&Array.isArray(t.gallery)&&t.gallery.slice(0,3).map((a,s)=>e.jsx("div",{className:"h-24 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:a,alt:`${t.name} thumbnail ${s+1}`,className:"w-full h-full object-cover",onError:k=>{k.currentTarget.src="https://via.placeholder.com/100x100?text=Thumb",k.currentTarget.alt="Thumbnail not available"},crossOrigin:"anonymous"})},s))})]}),e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("h3",{id:"product-modal-title",className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"text-xl font-bold text-red-500 mr-4",children:m(t.finalPrice)}),e.jsx("span",{className:`text-sm px-2 py-1 rounded ${t.availability==="in-stock"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.availability==="in-stock"?"In Stock":"Out of Stock"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:t.longDescription})]}),t.technicalSpecifications&&Object.keys(t.technicalSpecifications).length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:"Technical Specifications"}),e.jsx("ul",{className:"text-gray-600",children:Object.entries(t.technicalSpecifications).map(([a,s])=>e.jsxs("li",{className:"flex",children:[e.jsxs("span",{className:"font-medium w-32 capitalize",children:[a,":"]}),e.jsx("span",{children:s})]},a))})]}),t.features&&Array.isArray(t.features)&&t.features.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:"Features"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600",children:t.features.map((a,s)=>e.jsx("li",{children:a},s))})]}),e.jsxs("div",{className:"mt-6 flex space-x-3",children:[e.jsx("a",{href:`https://tienda.bskmt.com/producto/${t.slug||j(t.name)}`,target:"_blank",rel:"noopener noreferrer",className:`flex-1 py-3 text-center rounded transition-colors ${t.availability==="in-stock"?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-disabled":t.availability!=="in-stock",tabIndex:t.availability!=="in-stock"?-1:0,children:"Buy Now"}),e.jsx("button",{onClick:w,className:"flex-1 py-3 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors","aria-label":"Close product details modal",children:"Close"})]})]})]})})})})})]})]})};export{L as default};
//# sourceMappingURL=Store-BI26Zudz.js.map
