import{j as e,S as F,T,r as j,F as R}from"./index-CRg7Hs4i.js";import{t as x,c as v,s as k,g as I,a as $,f as p,e as u,p as w}from"./es-DmxkcGcy.js";function _(s,t){const l=x(s);return isNaN(t)?v(s,NaN):(l.setDate(l.getDate()+t),l)}function L(s,t){const l=x(s);if(isNaN(t))return v(s,NaN);if(!t)return l;const r=l.getDate(),n=v(s,l.getTime());n.setMonth(l.getMonth()+t+1,0);const a=n.getDate();return r>=a?n:(l.setFullYear(n.getFullYear(),n.getMonth(),r),l)}function E(s,t){const l=k(s),r=k(t);return+l==+r}function z(s){const t=x(s),l=t.getMonth();return t.setFullYear(t.getFullYear(),l+1,0),t.setHours(23,59,59,999),t}function A(s){const t=x(s);return t.setDate(1),t.setHours(0,0,0,0),t}function P(s,t){const l=I(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??l.weekStartsOn??l.locale?.options?.weekStartsOn??0,n=x(s),a=n.getDay(),i=(a<r?-7:0)+6-(a-r);return n.setDate(n.getDate()+i),n.setHours(23,59,59,999),n}function H(s,t){const l=x(s),r=x(t);return l.getFullYear()===r.getFullYear()&&l.getMonth()===r.getMonth()}function Y(s,t){return L(s,-1)}const W=({events:s,currentMonth:t,setCurrentMonth:l,onEventClick:r})=>{const n=()=>{l(L(t,1))},a=()=>{l(Y(t))},i=o=>p(o,"MMMM yyyy",{locale:u}),c=()=>e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Mes anterior",children:e.jsx(F,{className:"text-slate-950"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-950 capitalize",children:i(t)}),e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-200 transition","aria-label":"Mes siguiente",children:e.jsx(T,{className:"text-slate-950"})})]}),h=()=>{const o=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"];return e.jsx("div",{className:"grid grid-cols-7 mb-2",children:o.map((d,y)=>e.jsx("div",{className:"text-center font-semibold text-sm py-2",children:d},y))})},b=()=>{const o=A(t),d=z(t),y=$(o,{locale:u}),C=P(d,{locale:u}),M=[];let N=[],g=y;for(;g<=C;){for(let D=0;D<7;D++){const f=g,S=s.filter(m=>{if(!m.startDate)return!1;const O=new Date(m.startDate);return E(O,f)});N.push(e.jsxs("div",{className:`min-h-24 p-1 border border-gray-200 flex flex-col ${H(f,o)?"text-slate-950 bg-white":"text-gray-400 bg-gray-50"} ${E(f,new Date)?"bg-green-400 bg-opacity-20":""}`,children:[e.jsx("span",{className:"text-sm font-medium self-end",children:p(f,"d")}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[" ",S.map(m=>e.jsx("button",{className:"text-xs p-1 my-0.5 rounded bg-red-600 text-white truncate w-full text-left",title:m.name,onClick:()=>r(m),"aria-label":`Ver detalles del evento ${m.name}`,children:m.name},m._id))]})]},f.toISOString())),g=_(g,1)}M.push(e.jsxs("div",{className:"grid grid-cols-7",children:[" ",N]},g.toISOString())),N=[]}return e.jsx("div",{className:"mb-4 border-t border-l border-gray-200",children:M})};return e.jsxs("div",{className:"calendar-container",children:[c(),h(),b()]})},B=({event:s,onClose:t})=>{if(!s)return null;j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const l=a=>{if(!a)return"";const[i,c]=a.split(":");return`${i}:${c}`},r=a=>{switch(a){case"low":return"bg-green-400";case"medium":return"bg-yellow-500";case"high":return"bg-red-500";default:return"bg-gray-500"}},n=a=>{switch(a){case"Ride":return"bg-blue-500";case"Meetup":return"bg-purple-500";default:return"bg-gray-500"}};return e.jsxs("div",{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-40",onClick:t,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl w-full",children:e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl leading-6 font-bold text-gray-900",id:"modal-headline",children:s.name}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold text-white ${r(s.difficultyLevel)}`,children:[s.difficultyLevel==="low"?"Baja":s.difficultyLevel==="medium"?"Media":"Alta"," dificultad"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold text-white ${n(s.eventType)}`,children:s.eventType==="Ride"?"Rodada":"Encuentro"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white bg-indigo-500",children:s.internalEventType})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none","aria-label":"Cerrar modal",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mt-4 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.mainImage||"/default-event-image.webp",alt:s.name,className:"w-full h-64 object-cover",loading:"lazy",crossOrigin:"anonymous"})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Información del Evento"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Fecha"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[p(w(s.startDate),"EEEE d 'de' MMMM yyyy",{locale:u}),s.endDate&&` al ${p(w(s.endDate),"EEEE d 'de' MMMM yyyy",{locale:u})}`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Hora de encuentro"}),e.jsx("p",{className:"text-sm text-gray-900",children:l(s.meetupTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Hora de salida"}),e.jsx("p",{className:"text-sm text-gray-900",children:l(s.departureTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Duración"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[s.durationDays," día(s)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Lugar de encuentro"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[s.departureLocation.address,", ",s.departureLocation.city]})]}),s.stayLocation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Lugar de estadía"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[s.stayLocation.address,", ",s.stayLocation.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cupos disponibles"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[s.remainingSpots," de ",s.maxParticipants]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mt-4",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Precios"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Piloto:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",s.basePriceRider?.toLocaleString("es-CO")||"Gratis"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Acompañante:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",s.basePriceCompanion?.toLocaleString("es-CO")||"Gratis"]})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded border border-yellow-100",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:["* Los miembros del club obtienen descuentos según su membresía.",e.jsx("a",{href:"/memberships",className:"text-yellow-600 hover:underline ml-1",children:"Ver membresías"})]})})]})]}),e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg h-full",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Itinerario"}),s.itinerary?.map((a,i)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"font-semibold text-gray-700 mb-2",children:["Día ",a.day]}),e.jsx("div",{className:"space-y-3",children:a.activities.map((c,h)=>e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0 w-16 text-sm font-medium text-gray-500",children:c.time}),e.jsx("div",{className:"ml-2 text-sm text-gray-700",children:c.description})]},h))})]},i)),s.activities&&s.activities.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mt-6 mb-3",children:"Actividades"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700",children:s.activities.map((a,i)=>e.jsx("li",{children:a},i))})]})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Incluye"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 mb-6",children:s.includes?.map((a,i)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:a.item}),a.detail&&e.jsx("span",{className:"block text-gray-600",children:a.detail})]},i))}),e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Requisitos"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 mb-6",children:s.requirements?.map((a,i)=>e.jsx("li",{children:a},i))}),e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Recomendaciones"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 mb-6",children:s.recommendations?.map((a,i)=>e.jsx("li",{children:a},i))}),s.visits&&s.visits.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Lugares a visitar"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700",children:s.visits.map((a,i)=>e.jsx("li",{children:a},i))})]})]})})]}),s.additionalInformation&&e.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("h4",{className:"text-lg font-bold text-blue-800 mb-2",children:"Información adicional"}),e.jsx("p",{className:"text-sm text-blue-700 whitespace-pre-line",children:s.additionalInformation})]}),e.jsxs("div",{className:"mt-8 bg-slate-950 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("h4",{className:"text-xl font-bold text-white",children:"¿Te gustaría participar en este evento?"}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Regístrate ahora y únete a la comunidad BSK Motorcycle Team"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("a",{href:"/register",className:"px-6 py-3 bg-green-400 hover:bg-green-400 text-slate-950 font-bold rounded-full transition duration-300",children:"Regístrate ahora"}),e.jsx("a",{href:"/memberships",className:"px-6 py-3 bg-white hover:bg-gray-200 text-slate-950 font-bold rounded-full transition duration-300",children:"Conoce las membresías"})]})]}),e.jsx("div",{className:"mt-4 text-center text-gray-300 text-sm",children:e.jsx("p",{children:"Los miembros registrados obtienen puntos por participación que pueden canjear por beneficios exclusivos."})})]})]})})})})})})]})},G=({events:s,loading:t,error:l})=>{const[r,n]=j.useState("events"),[a,i]=j.useState(new Date),[c,h]=j.useState(null),b=d=>{h(d)},o=()=>{h(null)};return e.jsxs("section",{className:"py-20 px-4 bg-slate-950 text-white",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("h2",{className:"text-4xl font-bold text-center mb-12",children:["PRÓXIMOS ",e.jsx("span",{className:"text-green-400",children:"EVENTOS"})]}),e.jsxs("div",{className:"mb-8 flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>n("events"),className:`px-6 py-2 rounded-full ${r==="events"?"bg-red-600 text-white":"bg-white text-slate-950"}`,"aria-pressed":r==="events",children:"Lista de Eventos"}),e.jsx("button",{onClick:()=>n("calendar"),className:`px-6 py-2 rounded-full ${r==="calendar"?"bg-red-600 text-white":"bg-white text-slate-950"}`,"aria-pressed":r==="calendar",children:"Calendario"})]}),r==="events"?e.jsx(e.Fragment,{children:t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600",role:"status","aria-label":"Cargando eventos"})}):l?e.jsxs("div",{className:"text-center py-10",children:[e.jsxs("p",{className:"text-red-400 mb-4",children:["Error al cargar los eventos: ",l]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Reintentar"})]}):e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.length>0?s.map(d=>e.jsxs("div",{className:"bg-white text-slate-950 rounded-xl overflow-hidden shadow-lg transition-transform hover:scale-105",children:[e.jsx("div",{className:"relative",style:{aspectRatio:"16/9"},children:e.jsx("img",{src:d.mainImage||"/default-event-image.webp",alt:d.name,className:"w-full h-full object-cover",loading:"lazy",crossOrigin:"anonymous"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:d.name}),e.jsx("p",{className:"text-red-600 font-semibold mb-3",children:d.startDate?p(w(d.startDate),"EEEE d 'de' MMMM yyyy",{locale:u}):"Fecha no disponible"}),e.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.departureLocation?.address||"Ubicación no disponible"]}),e.jsx("button",{onClick:()=>b(d),className:"mt-4 w-full bg-slate-950 hover:bg-green-400 text-white py-2 rounded-full transition duration-300","aria-label":`Más información sobre ${d.name}`,children:"Más información"})]})]},d._id)):e.jsx("div",{className:"col-span-3 text-center py-10",children:e.jsx("p",{className:"text-xl",children:"No hay eventos programados en este momento"})})})}):e.jsxs("div",{className:"bg-white rounded-xl p-6 text-slate-950",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(R,{className:"text-red-600 mr-2","aria-hidden":"true"}),e.jsx("h3",{className:"text-xl font-bold",children:"Calendario de Eventos"})]}),e.jsx(W,{events:s,currentMonth:a,setCurrentMonth:i,onEventClick:b})]})]}),c&&e.jsx(B,{event:c,onClose:o})]})};export{G as default};
//# sourceMappingURL=EventsSection-Dt1OTsfD.js.map
